var APP3D;!function(){"use strict";function e(){function e(){var e=Number($(this).val()),t=Number($("#maxPage").text());e>t?(e=t,$(this).val(e)):0>=e&&(e=1,$(this).val(e)),e!==c&&(f=!0,c=e,r($(".book :selected").val()))}function t(e){return(e.keyCode<96||e.keyCode>105||f)&&37!==e.keyCode&&39!==e.keyCode&&8!==e.keyCode&&46!==e.keyCode?(e.preventDefault(),e.stopPropagation(),!1):void 0}function o(){return c===Number($("#maxPage").text())||f?!1:(f=!0,c++,void r($(".book :selected").val()))}function n(){return 1===c||f?!1:(f=!0,c--,void r($(".book :selected").val()))}function a(){var e=$(this).find(":selected").val();void 0!==e?(f=!0,c=1,r(e)):($(".bookControl").addClass("hide"),$("page").html(""))}function r(e){function t(e){$("page").html(e.data),$("page").scrollTop(0),$("#currentPage").val(c),e.nbPage&&$("#maxPage").text(e.nbPage),$(".bookControl").removeClass("hide"),f=!1}$.post("php/getPage.php",{page:c,name:e},t,"json")}function i(e){return e.preventDefault(),e.stopPropagation(),!1}function p(){$(".background").attr("src","img/"+$(this).val()+".jpg"),$("page").attr("style",$(".theme :selected").attr("pos"))}function u(e){l(e.target.files)}function s(e){e.preventDefault(),e.stopPropagation(),l(e.originalEvent.dataTransfer.files)}function d(e){e.preventDefault(),e.stopPropagation(),e.originalEvent.dataTransfer.dropEffect="copy"}function l(e){function t(t){function o(e){if(e.success){var t=$("<option></option>");t.text(e.name),t.val(e.name),$(".book").append(t)}else console.error(e.error)}$.post("php/upload.php",{data:t.target.result,name:e[0].name},o,"json")}var o=new FileReader;o.onload=t,o.readAsDataURL(e[0])}var c=1,f=!1;$("input[type=file]").bind("drop",s),$("input[type=file]").bind("dragover",d),$("input[type=file]").change(u),$(".theme").change(p),$(".book").change(a),$("page").mousedown(i),$(".next").mousedown(o),$(".prev").mousedown(n),$("#currentPage").keydown(t),$("#currentPage").keyup(e)}$(document).ready(e)}();